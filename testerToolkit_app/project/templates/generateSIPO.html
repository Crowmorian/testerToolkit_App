<!-- HTML file containing the main page -->

{% extends "generators.html" %}

{% block generation %}
<script type="text/javascript">  
    function selectAll(){
        console.log("Pressed!")
        first = Math.round(Math.random() * (9 - 1) + 1)
        second = Math.round(Math.random() * (9 - 1) + 1)
        third = Math.round(Math.random() * (9 - 1) + 1)
        fourth = Math.round(Math.random() * (9 - 1) + 1)
        fifth = Math.round(Math.random() * (9 - 1) + 1)
        sixth = Math.round(Math.random() * (9 - 1) + 1)
        seventh = Math.round(Math.random() * (9 - 1) + 1)
        eighth = Math.round(Math.random() * (9 - 1) + 1)
        nineth = Math.round(Math.random() * (9 - 1) + 1)
        
        var firstEle = document.getElementById("first");
        var secondEle = document.getElementById("second");
        var thirdEle = document.getElementById("third");
        var fourthEle = document.getElementById("fourth");
        var fifthEle = document.getElementById("fifth");
        var sixthEle = document.getElementById("sixth");
        var seventhEle = document.getElementById("seventh");
        var eighthEle = document.getElementById("eighth");
        var ninethEle = document.getElementById("nineth");

        firstEle.value = first;
        secondEle.value = second;
        thirdEle.value = third;
        fourthEle.value = fourth;
        fifthEle.value = fifth;
        sixthEle.value = sixth;
        seventhEle.value = seventh;
        eighthEle.value = eighth;
        ninethEle.value = nineth;
    }
</script>

<div class="help-container">
    <a href="#" class="toggle-button-help" id="toggle-button-help">Need help?</a>
    <div class="helptext" id="helptext">
        <p>
            Legend
        </p>
        <br>
        <p>
            This is where you can generate a SIPO connection number. The number is created from a nine digit key. 
        </p>
        <br>
        <p>
            This can be specified by you or made random by the button to the right.
        </p>
    </div>
</div>

<form method="POST" action="/generateSIPO">
    <div class="creation-content">
        <table class="creation-table">
            {% with messages = get_flashed_messages() %}
            {% if messages %}
            <tr class="creation-track">
                <td class="creation-column" colspan="10">                    
                    <div class="notification is-danger">
                        {{ messages[0] }}
                    </div>                    
                </td>
            </tr>
            {% endif %}
            {% endwith %}
            <tr class="generators-input-track">
                <td colspan="10" class="generators-input-column">
                    <label class="generators-label">Base Numbers</label>
                </td>
            </tr>
            <tr class="generators-input-track"></tr>
            <tr class="generators-input-track">
                <td>
                    <input class="generators-input" type="number" name="first" id="first" value="{{first}}" min="1" max="9">
                </td>
                <td>
                    <input class="generators-input" type="number" name="second" id="second" value="{{second}}" min="1" max="9">
                </td>
                <td>
                    <input class="generators-input" type="number" name="third" id="third" value="{{third}}" min="1" max="9">
                </td>
                <td>
                    <input class="generators-input" type="number" name="fourth" id="fourth" value="{{fourth}}" min="1" max="9">
                </td>
                <td>
                    <input class="generators-input" type="number" name="fifth" id="fifth" value="{{fifth}}" min="1" max="9">
                </td>
                <td>
                    <input class="generators-input" type="number" name="sixth" id="sixth" value="{{sixth}}" min="1" max="9">
                </td>
                <td>
                    <input class="generators-input" type="number" name="seventh" id="seventh" value="{{seventh}}" min="1" max="9">
                </td>
                <td>
                    <input class="generators-input" type="number" name="eighth" id="eighth" value="{{eighth}}" min="1" max="9">
                </td>
                <td>
                    <input class="generators-input" type="number" name="nineth" id="nineth" value="{{nineth}}" min="1" max="9">
                </td>
                <td>
                    <input class="generators-button-small" type="button" onclick='selectAll()' value="Random Key"/>  
                </td>
            </tr>
            <tr class="generators-input-track">
                <td colspan="10">
                    <input class="generators-button" type="submit" value="Generate">                        
                </td>
            </tr>
        </table>
    </div>
    {% if results|length > 0 %}
        <div class="creation-content-lower">
            <div class="generated-content-title">Generated SIPO Numbers</div>
            {% for i in results %}
                <content class="generated-content-item">{{ i }} </content>
            {% endfor %}
        </div>
    {% endif %}
</form>

<script type="text/javascript">
    const helpButton = document.getElementById('toggle-button-help')
    const helptext = document.getElementById('helptext')

    helpButton.addEventListener('click', () => {
      helptext.classList.toggle('active')
    })
</script>

{% endblock %}